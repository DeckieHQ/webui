<div class='col-md-3'>
  <div class='well'>
    {{#if isHost}}
      {{#link-to 'event.edit'}}<button class="btn btn-success">Edit event</button>{{/link-to}}
    {{else if pending}}
      <div>Your submission to this event in awaiting the host acceptance</div>
      <div>
        <button {{action 'quit_event'}} class="btn btn-danger">
          Quit
        </button>
      </div>
    {{else if confirmed}}
      You are attendee to this event
      <div>
        <button {{action 'quit_event'}} class="btn btn-danger">
          Quit
        </button>
      </div>
    {{else}}
      <div>
        Join event
        {{dynamic-submit actionOnSubmit="join_event"}}
        <!-- <button {{action 'join_event'}} class="btn btn-success">
          Join
        </button> -->
      </div>
    {{/if}}
  </div>

  {{#if isHost}}
    <div class='well'>
      {{#if pendingSubmissions}}
        <b>Pending submissions:</b>
      {{else}}
        No pending submissions
      {{/if}}
      {{#each pendingSubmissions as |submission|}}
        <div class='inline-block'>
          <div>
            {{#link-to 'profile' submission.profile}}
              {{submission.profile.display_name}}
            {{/link-to}}
          </div>
          <button {{action 'accept_submission' submission}} class="btn btn-success">
            Accept
          </button>
        </div>
      {{/each}}
    </div>
  {{/if}}

  <div class='well'>
    <b>Hosted by:</b>

    {{#link-to 'profile' model.host}}
      <div>{{model.host.display_name}}</div>
    {{/link-to}}
    <div>{{model.host.short_description}}</div>
  </div>

  <div class='well'>
    <b>Location:</b>
    <div>{{model.street}}</div>
    <div>{{model.postcode}}, {{model.city}}</div>
    <div id='map-container'>
      <div id="map"></div>
    </div>
  </div>

  <div class='well'>
    <b>Attendees: {{model.attendees.length}} / {{model.capacity}}</b>

    {{#each model.attendees as |attendee|}}
      {{#link-to 'profile' attendee}}
        <div>{{attendee.display_name}}</div>
      {{/link-to}}
    {{/each}}
  </div>
</div>

<div class='col-md-9'>
  <div class='well'>
    <div class='row margin-bottom'>
      <div class='col-lg-8'>
        <div class='event-title'>{{model.title}}</div>
        <div>
          {{model.short_description}}
        </div>
      </div>
      <div class='col-lg-4'>
        <b>{{moment-format model.begin_at}}</b>
        <div>({{moment-from-now model.begin_at}})</div>
      </div>
    </div>
    <div class='row margin-bottom'>
      <div class='col-lg-4'>
        <b>Category: {{model.category}}</b>
      </div>
      <div class='col-lg-4'>
        <b>Expected ambiance: {{model.ambiance}}</b>
      </div>
      <div class='col-lg-4'>
        <b>Minimum level required: {{model.level}}</b>
      </div>
    </div>
    <div class='row'>
      <div class='col-lg-12'>
        <div>{{model.description}}</div>
      </div>
    </div>
  </div>

  <div class='well'>
    <form>
      {{validated-input label="Comment" placeholder="Enter your comment" value=message errors=errors.message}}

      <div class='submit inline-block'>
        {{#if isMember}}
          <div>
            Make the comment private:
            {{input type="checkbox" checked=isPrivate}}
          </div>
        {{/if}}

        {{dynamic-submit actionOnSubmit="comment"}}
      </div>
    </form>
  </div>

  {{#if isMember}}
    <div>
      Show only private comments:
      {{input type="checkbox" checked=onlyPrivates}}
    </div>
  {{/if}}

  {{#if onlyPrivates}}
    {{comments-list isPrivate=true event=model isHost=isHost}}
  {{else}}
    {{comments-list event=model isHost=isHost}}
  {{/if}}
</div>
